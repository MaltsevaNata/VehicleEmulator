# Задание
В Docker образе запущен сервис, который пишет данные в сокет.
Адрес ws://127.0.0.1:8080. 

Данные имеют следующий формат:
```
{
 "component": "Realbridge Air Amplifier",
 "country": "Argentina",
 "description": "ut rerum ut quis nulla quasi quis est autem.",
 "model": "mh 80151"
 }
 ```
## В задании необходимо:
1. Реализвать сервис, который читает данные из сокета, преобразует в json, и записывает в MongoDB
2. Сервис должен уметь отдавать эти данные по http GET запросу 
с постраничной пагинацией по 50 записей.
3. Решение опубликовать на Github или Gitlab
4. В репозитории кроме кода сервиса должны быть Dockerfile, docker-compose.yml и README.md с описанием решения
## Замечания:
1. JSON может быть не валидный
2. Поле country может быть пустым, в этом случае подставлять 
дефолтное значение "USA"
## Технические ограничения
* Язык - Python
* Веб фреймверк - aiohttp
* База данных - MongoDB
* Код должен выполняться асинхронно

## Запуск сервиса
1. Запуск MongoDB 
    ```
    docker-compose -f docker-compose.mongo.yaml up --build
    ```
    Для первоначальной инициализации MongoDB кластера, выполнить:
    ```
    cd mongo
    init_cluster.sh
    ```
2. Запуск сервиса: 
    ```
    docker-compose up --build 
    ```
## Описание сервиса
- datagenerator: сервис генерации данных, полученный из задания
- mongo: для MongoDB настроено шардирование из 2-х шардов, для каждого шарда создано 3 реплики
- etl: сервис для получения данных из сокета и загрузки в MongoDB
- api: сервис для получения данных из MongoDB постранично. 
После запуска описание API доступно в формате OpenAPI по адресу:
 http://localhost:5000/spec-api
Получение данных производится по GET запросу:
http://localhost:5000/components?page_size=50&page_num=1
Данные отсортированы в алфавитном порядке.
## Логирование
По умолчанию установлен уровень логирования ```INFO```. 
В файле ```.env``` можно изменить его на ```DEBUG``` и получать сообщения от ETL в консоль
о сохранении данных в MongoDB.